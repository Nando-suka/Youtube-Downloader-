<!DOCTYPE html>
<html>
<head>
    <title>YouTube to MP3 Downloader</title>
    <link rel="stylesheet" href="/staticDua/style.css">
</head>
<body>
    <!--Bagian Header-->
    <header>
        <h3 class="header-2">Selamat Datang di YouTube Downloader</h3>
    </header>

    <!--Bagian Container-->
    <div class="container">
        <h1>YouTube to MP3 Converter</h1>
        
        <!-- Tambahan Fitur Pencarian -->
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Cari video...">
            <button onclick="searchVideos()">Cari</button>
        </div>
        
        <div id="searchResults" class="results-container"></div>
        
        <form action="/download" method="POST">
            <input type="url" name="url" id="videoUrl" placeholder="Masukkan URL YouTube..." required>
            <button type="submit">Convert to MP3</button>
        </form>
    </div>

   

    <script>
        async function searchVideos() {
            const searchInput = document.getElementById('searchInput');
            const resultsContainer = document.getElementById('searchResults');
            
            if (!searchInput.value.trim()) {
                alert('Masukkan kata kunci pencarian');
                return;
            }

            try {
                const response = await fetch(`/search?q=${encodeURIComponent(searchInput.value)}`);
                const data = await response.json();
                
                resultsContainer.innerHTML = '';
                
                data.items.forEach(item => {
                    const videoDiv = document.createElement('div');
                    videoDiv.className = 'video-item';
                    videoDiv.innerHTML = `
                        <img src="${item.snippet.thumbnails.default.url}" alt="Thumbnail">
                        <div class="video-info">
                            <h3>${item.snippet.title}</h3>
                            <p>Channel: ${item.snippet.channel}</p>
                            <button onclick="selectVideo('${item.id.videoID}')">Pilih</button>
                        </div>
                    `;
                    resultsContainer.appendChild(videoDiv);
                });
            } catch (error) {
                console.error('Error:', error);
                resultsContainer.innerHTML = 'Gagal memuat hasil pencarian';
            }
        }

        function selectVideo(videoId) {
            document.getElementById('videoUrl').value = `https://youtu.be/${videoId}`;
            document.getElementById('searchResults').innerHTML = '';
            document.getElementById('searchInput').value = '';
        }
    </script>
</body>
</html>